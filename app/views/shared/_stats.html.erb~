<% if current_user?(@user) %>
<div class="stats">
<section>
  Hosted <%= pluralize(@user.events_hosted.count, "event") %>
  <ul>
  <% @user.events_hosted.each do |host| %>
   <br /><%= link_to host.title, event_path(host) %>
  <% end %>
  </ul>
</section>
<section>
  Attending <%= pluralize(@user.events_attended.count, "event") %>
  <ul>
  <% @user.events_attended.each do |attend| %>
    <br /><%= link_to attend.title, event_path(attend) %>
  <% end %>
  </ul>
</section>

<% else %>

<h2><%= @user.name %>'s hosted events that you are attending:</h2>
  <% @user.events_hosted.each do |host| %>
    <%= render host if current_user.reverse_invitations.find_by_event_id(host.id) %><br>
  <% end %>

<br>

  <h2>Your hosted events that <%= @user.name %> is attending:</h2>
  <% current_user.events_hosted.each do |host| %>
    <%= render host if @user.reverse_invitations.find_by_event_id(host.id) %><br>
  <% end %>

<br>

  <h2>Events that you are both attending:</h2>
  <% current_user.events_attended.each do |both| %>
    <%= render both if @user.reverse_invitations.find_by_event_id(both.id) %><br>
  <% end %>

<br><br>

<% end %>

<% if current_user.admin? %>

  <a href="<%= following_user_path(@user) %>">
    <strong id="following" class="stat">
      <%= @user.followed_users.count %>
    </strong>
    following
  </a>
  <a href="<%= followers_user_path(@user) %>">
    <strong id="followers" class="stat">
      <%= @user.followers.count %>
    </strong>
    followers
  </a>
</div>
<% end %>
